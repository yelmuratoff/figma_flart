<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Generate Dart Code</title>
    <style>
      body {
        font-family: Roboto, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
      }

      h2 {
        text-align: center;
        color: #41d0fd;
        margin-top: 24px;
      }

      fieldset {
        border: 0;
        padding: 16px;
        background-color: #ffffff;
        margin: 16px auto;
        max-width: 400px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      button {
        background-color: #41d0fd;
        color: white;
        border: none;
        padding: 12px 16px;
        border-radius: 8px;
        cursor: pointer;
        margin: 8px;
        font-size: 16px;
        display: inline-block;
      }

      button:hover {
        background-color: #85e3ff;
      }

      #codeBlock {
        background-color: #f1f1f1;
        height: 500px;
        overflow: auto;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        padding: 16px;
        margin: 16px auto;
        max-width: 400px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        font-family: monospace;
        position: relative;
      }

      #copyButton {
        background-color: #41d0fd;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        position: absolute;
        top: 8px;
        right: 16px;
      }

      #buttonGroup {
        text-align: center;
        margin-top: 16px;
      }
    </style>
  </head>

  <body>
    <h2>Flutter Style Generator</h2>

    <fieldset>
      <legend>TextStyle Options</legend>
      <label>
        <input type="checkbox" id="useThemeExtensions" />
        Use Theme Extensions
      </label>
      <label>
        <input type="checkbox" id="includeFontName" />
        Include font name
      </label>
    </fieldset>

    <!-- New Button Group for Sizes, Gaps, Border Radiuses, and Tokens -->
    <div id="buttonGroup">
      <button id="generateTextStyles">Generate TextStyles</button>
      <button id="generateColors">Generate Colors</button>
      <button id="generateEffects">Generate Effects</button>
      <button id="generateVariables">Generate variables</button>
    </div>

    <div id="codeBlock">
      <button id="copyButton">Copy</button>
      <pre id="codeContent">No code generated yet.</pre>
    </div>

    <script>
      // Button click handlers for generating code
      document.getElementById("generateTextStyles").onclick = () => {
        const useThemeExtensions =
          document.getElementById("useThemeExtensions").checked;
        const includeFontName =
          document.getElementById("includeFontName").checked;
        window.parent.postMessage(
          {
            pluginMessage: {
              type: "generate-textstyles",
              useThemeExtensions,
              includeFontName,
            },
          },
          "*"
        );
      };

      document.getElementById("generateColors").onclick = () => {
        window.parent.postMessage(
          { pluginMessage: { type: "generate-colors" } },
          "*"
        );
      };

      document.getElementById("generateEffects").onclick = () => {
        window.parent.postMessage(
          { pluginMessage: { type: "generate-effects" } },
          "*"
        );
      };

      document.getElementById("generateVariables").onclick = () => {
        const useThemeExtensions =
          document.getElementById("useThemeExtensions").checked;
        window.parent.postMessage(
          { pluginMessage: { type: "generate-variables", useThemeExtensions } },
          "*"
        );
      };

      // Display generated Dart code
      window.onmessage = (event) => {
        if (event.data.pluginMessage.type === "dart-code") {
          document.getElementById("codeContent").textContent =
            event.data.pluginMessage.code;
        }
      };

      // Copy code to clipboard
      document.getElementById("copyButton").onclick = () => {
        const codeBlock = document.getElementById("codeContent").textContent;

        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(codeBlock).then(
            () => alert("Code copied to clipboard!"),
            (err) => alert("Failed to copy code: " + err)
          );
        } else {
          // Fallback for browsers that do not support Clipboard API
          const textArea = document.createElement("textarea");
          textArea.value = codeBlock;
          document.body.appendChild(textArea);
          textArea.select();
          try {
            document.execCommand("copy");
            alert("Code copied to clipboard!");
          } catch (err) {
            alert("Failed to copy code: " + err);
          }
          document.body.removeChild(textArea);
        }
      };
    </script>
  </body>
</html>
